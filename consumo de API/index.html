<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja de Games</title>
</head>
<body>
    
<h1>Loja de Games</h1>
<br>
<h2>Lista de games/pre√ßos:</h2>
<ul id="list-games">

</ul>
<hr>
<h2>Novo Game:</h2>
<input type="text" name="titulo" id="ititulo" placeholder="Titulo"> <br>
<input type="number" name="ano" id="iano" placeholder="Ano"> <br>
<input type="number" name="price" id="iprice" placeholder="Price"> <br>
<button onclick="criarGame()">Criar</button>

</body>

<script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
<script>

axios.get('http://localhost:4545/games')
    .then((response) =>{
        var gamesData = response.data
        var listGames = document.getElementById('list-games');

        gamesData.forEach((games) =>{
            var newItem = document.createElement('li');
            newItem.textContent = `${games.id}. ${games.title} - $${games.price}`
            listGames.appendChild(newItem);
        })

    })
    .catch((error) =>{
        console.log(error);
    })

    function criarGame(){
        var title = document.getElementById('ititulo').value;
        var year = parseInt(document.getElementById('iano').value);
        var price = parseFloat(document.getElementById('iprice').value);

        var newGame = {
            titleVar: title,
            yearVar: year,
            priceVar: price
        };

        axios.post('http://localhost:4545/game', newGame)
            .then((response) =>{
                if(response.status === 201){
                    alert('Game cadastrado');
                    window.location.reload();
                }
            })
            .catch((error) =>{
                console.log(error)
            })
    }


</script>
</html>